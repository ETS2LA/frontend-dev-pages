(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{48307:function(e,t,n){Promise.resolve().then(n.bind(n,66374))},89318:function(e,t,n){"use strict";n.d(t,{ZP:function(){return f},b6:function(){return c},c1:function(){return u},w6:function(){return l}});var r=n(39824),i=n(97921),o=n(2265),s=n(63861);let l="",c="",a="";async function u(){let e=await fetch("https://api.ets2la.com/auth/discord"),t=await e.json();window.open(t,"_blank")}async function d(e){let t="https://api.ets2la.com/user/".concat(a),n=await fetch(t,{headers:{Authorization:"Bearer ".concat(l)}}),r=await n.json();return r.error||null==r.data?(l="",a="",null):(e(c=r.data.username),r)}function f(){let{setToken:e,setUsername:t}=(0,i.a)(),{data:n}=(0,s.ZP)("global",r.Yw,{refreshInterval:1e3});return(0,o.useEffect)(()=>{if(n){if(!n.token||!n.user_id){l="",a="",e("");return}l=n.token,a=n.user_id,e(l),d(t)}},[n,e,t]),null}},97921:function(e,t,n){"use strict";n.d(t,{H:function(){return l},a:function(){return c}});var r=n(57437),i=n(2265),o=n(89318);let s=(0,i.createContext)(void 0);function l(e){let{children:t}=e,[n,l]=(0,i.useState)(o.w6),[c,a]=(0,i.useState)(o.b6);return(0,r.jsx)(s.Provider,{value:{token:n,username:c,setToken:l,setUsername:a},children:t})}function c(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},39824:function(e,t,n){"use strict";n.d(t,{Or:function(){return o},Yw:function(){return i},wX:function(){return s}});var r=n(42306);async function i(e){let t=await fetch("http://".concat(r.ip,":37520/backend/plugins/").concat(e,"/settings"));return await t.json()}async function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let i=await fetch("http://".concat(r.ip,":37520/backend/plugins/").concat(e,"/settings/").concat(t));if(!i.ok)return console.error("Failed to fetch: HTTP status ".concat(i.status)),n;try{let e=await i.json();if(null===e)return n;return e}catch(e){return console.error("Failed to parse JSON response:",e),n}}catch(e){return console.error("An error occurred while getting the setting by key:",e),n}}async function s(e,t,n){try{let i=await fetch("http://".concat(r.ip,":37520/backend/plugins/").concat(e,"/settings/").concat(t,"/set"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:n})});if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));return await i.json()}catch(e){console.error("An error occurred while setting the setting by key:",e)}}},66374:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(57437),i=n(89318),o=n(39824),s=n(62869),l=n(3991),c=n(69711),a=n(2265),u=n(93772),d=n(63861);function f(){let{data:e}=(0,d.ZP)("global",o.Yw,{refreshInterval:1e3}),[t,n]=(0,a.useState)(!1);if(!e)return(0,r.jsx)("div",{className:"w-full h-full font-geist pl-28 pr-20 pt-20 flex flex-col gap-6",children:"Loading..."});let f=null==e?void 0:e.user_id,h=null==e?void 0:e.token;return f&&h&&t&&(n(!1),u.Am.success((0,l.Iu)("frontend.login.successful"),{description:(0,l.Iu)("frontend.login.successful_description")})),(0,r.jsx)("div",{className:"font-geist w-full h-full items-center flex justify-center",children:(0,r.jsxs)("div",{className:"border rounded-md p-4 bg-input/10 items-center justify-center flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("p",{className:"text-xl font-semibold",children:(0,l.Iu)("frontend.login")}),(0,r.jsx)("p",{className:"max-w-96 text-muted-foreground",children:(0,l.Iu)("frontend.login.disclaimer")})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 w-96",children:[(0,r.jsxs)(s.z,{className:"max-w-96",variant:"outline",onClick:()=>{(0,i.c1)(),n(!0)},children:[(0,l.Iu)("frontend.login.discord")," ",t&&(0,r.jsx)(c.Z,{className:"ml-2"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"max-w-96 text-muted-foreground text-xs cursor-pointer",onClick:()=>{window.open("https://ets2la.github.io/documentation/privacy-policy/#the-information-we-store","_blank")},children:(0,l.Iu)("frontend.login.privacy_policy")})})]}),f&&h&&(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("p",{className:"text-muted-foreground max-w-96",children:(0,l.Iu)("frontend.login.already_logged_in")}),(0,r.jsx)("p",{className:"text-muted-foreground max-w-96",children:"User ID: ".concat(f)})]})]})})}},90535:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var r=n(61994);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,o=r.W,s=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return o(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:s,defaultVariants:l}=t,c=Object.keys(s).map(e=>{let t=null==n?void 0:n[e],r=null==l?void 0:l[e];if(null===t)return null;let o=i(t)||i(r);return s[e][o]}),a=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return o(e,c,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...l,...a}[t]):({...l,...a})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[317,861,438,284,971,117,744],function(){return e(e.s=48307)}),_N_E=e.O()}]);