(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{86905:function(e,t,s){Promise.resolve().then(s.bind(s,87070))},89318:function(e,t,s){"use strict";s.d(t,{ZP:function(){return p},b6:function(){return l},c1:function(){return d},w6:function(){return o}});var n=s(39824),a=s(97921),r=s(2265),i=s(63861);let o="",l="",c="";async function d(){let e=await fetch("https://api.ets2la.com/auth/discord"),t=await e.json();window.open(t,"_blank")}async function u(e){let t="https://api.ets2la.com/user/".concat(c),s=await fetch(t,{headers:{Authorization:"Bearer ".concat(o)}}),n=await s.json();return n.error||null==n.data?(o="",c="",null):(e(l=n.data.username),n)}function p(){let{setToken:e,setUsername:t}=(0,a.a)(),{data:s}=(0,i.ZP)("global",n.Yw,{refreshInterval:1e3});return(0,r.useEffect)(()=>{if(s){if(!s.token||!s.user_id){o="",c="",e("");return}o=s.token,c=s.user_id,e(o),u(t)}},[s,e,t]),null}},97921:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return l}});var n=s(57437),a=s(2265),r=s(89318);let i=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,a.useState)(r.w6),[l,c]=(0,a.useState)(r.b6);return(0,n.jsx)(i.Provider,{value:{token:s,username:l,setToken:o,setUsername:c},children:t})}function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},39824:function(e,t,s){"use strict";s.d(t,{Or:function(){return r},Yw:function(){return a},wX:function(){return i}});var n=s(42306);async function a(e){let t=await fetch("http://".concat(n.ip,":37520/backend/plugins/").concat(e,"/settings"));return await t.json()}async function r(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let a=await fetch("http://".concat(n.ip,":37520/backend/plugins/").concat(e,"/settings/").concat(t));if(!a.ok)return console.error("Failed to fetch: HTTP status ".concat(a.status)),s;try{let e=await a.json();if(null===e)return s;return e}catch(e){return console.error("Failed to parse JSON response:",e),s}}catch(e){return console.error("An error occurred while getting the setting by key:",e),s}}async function i(e,t,s){try{let a=await fetch("http://".concat(n.ip,":37520/backend/plugins/").concat(e,"/settings/").concat(t,"/set"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:s})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return await a.json()}catch(e){console.error("An error occurred while setting the setting by key:",e)}}},87070:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eO}});var n=s(57437),a=s(11511),r=s.n(a),i=s(72221),o=s.n(i);s(47960);var l=s(83518),c=s(2265),d=s(25922);function u(e){let{children:t,...s}=e;return(0,n.jsx)(d.f,{...s,children:t})}var p=s(84190),x=s(42306),m=s(27447),h=s(3991),f=s(14938),g=s(69751),b=s(46398),j=s(9334),v=s(18537),w=s(66140),N=s(19833),y=s(36803),k=s(22135),_=s(34763),I=s(51884),S=s(57570),z=s(39824),E=s(99376),O=s(97921),C=s(62869),Z=s(93772),A=s(63861),D=s(31890);function T(){let{data:e}=(0,A.ZP)("update",x.UP,{refreshInterval:6e4}),{data:t}=(0,A.ZP)("devmode",x.DK),{data:s}=(0,A.ZP)("metadata",x.ZX),{token:a,username:r,setToken:i,setUsername:o}=(0,O.a)(),u=(0,m.SE)(),T=(0,E.useRouter)(),M=(0,E.usePathname)(),P=(0,E.useSearchParams)(),{theme:L}=(0,d.F)(),X=(e,t)=>{if(t){let s=P.get("url"),n=t.url;if(M===e&&s===n)return"font-medium bg-secondary transition-all hover:shadow-md active:scale-95 duration-200"}else if(M===e)return"font-medium bg-secondary transition-all hover:shadow-md active:scale-95 duration-200";return"font-medium transition-all hover:shadow-md active:scale-95 duration-200"};return(0,n.jsxs)(l.DD,{className:"border-none font-geist",variant:"inset",id:"sidebar",children:[(0,n.jsx)(l.$l,{className:"bg-sidebarbg w-full",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center w-full",id:"sidebar_header",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,n.jsx)("p",{className:"text-sm font-semibold pl-2 cursor-pointer",onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/about")})},children:"ETS2LA"}),(0,n.jsx)("p",{className:"text-xs pl-2 font-semibold text-muted-foreground cursor-pointer",onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/page?url=/changelog")})},children:s&&"v"+s.version||"ERROR: please refresh the page or purge .next/cache"})]}),e&&(0,n.jsx)(C.z,{size:"sm",variant:"outline",className:"w-full",onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/page?url=/updater")})},children:(0,h.Iu)("frontend.sidebar.updates_available")})]})}),(0,n.jsxs)(l.TZ,{className:"bg-sidebarbg custom-scrollbar",children:[(0,n.jsxs)(l.Hz,{children:[(0,n.jsx)(l.nO,{className:"font-semibold",children:(0,h.Iu)("frontend.sidebar.main")}),(0,n.jsxs)(l.bb,{className:X("/about"),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/about")})},children:[(0,n.jsx)(f.Z,{})," ",(0,h.Iu)("frontend.sidebar.dashboard")]}),(0,n.jsxs)(l.bb,{className:X("/visualization"),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/visualization")})},children:[(0,n.jsx)(g.Z,{})," ",(0,h.Iu)("frontend.sidebar.visualization")]})]}),(0,n.jsxs)(l.Hz,{children:[(0,n.jsx)(l.nO,{className:"font-semibold",children:(0,h.Iu)("frontend.sidebar.plugins")}),(0,n.jsxs)(l.bb,{className:X("/page",{url:"/plugins"}),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/page?url=/plugins")})},children:[(0,n.jsx)(b.Z,{})," ",(0,h.Iu)("frontend.sidebar.manager")]}),t&&(0,n.jsxs)(l.bb,{className:X("/page",{url:"/catalogue"}),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/page?url=/catalogue")})},children:[(0,n.jsx)(j.Z,{})," ","Catalogue"]}),(0,n.jsxs)(l.bb,{className:X("/page",{url:"/performance"}),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/page?url=/performance")})},children:[(0,n.jsx)(v.Z,{})," ",(0,h.Iu)("frontend.sidebar.performance")]})]}),(0,n.jsxs)(l.Hz,{children:[(0,n.jsx)(l.nO,{className:"font-semibold",children:(0,h.Iu)("frontend.sidebar.help")}),(0,n.jsxs)(l.bb,{className:X("/wiki"),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/wiki")})},children:[(0,n.jsx)(w.Z,{})," ",(0,h.Iu)("frontend.sidebar.wiki")]}),(0,n.jsxs)(l.bb,{className:X("/page",{url:"/chat"}),onMouseDown:()=>{window.open("https://github.com/orgs/ETS2LA/projects/2","_blank")},children:[(0,n.jsx)(N.Z,{})," Roadmap"]})]}),t&&(0,n.jsxs)(l.Hz,{children:[(0,n.jsx)(l.nO,{className:"font-semibold",children:"Developers"}),(0,n.jsx)(l.bb,{className:X("/wiki"),onMouseDown:()=>{(0,x.D1)(),Z.Am.success("Reloaded plugin data")},children:"Reload Plugin Data"}),(0,n.jsx)(l.bb,{className:X("/page",{url:"/telemetry"}),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/page?url=/telemetry")})},children:"Telemetry"}),(0,n.jsx)(l.bb,{className:X("/wiki"),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/onboarding")})},children:"Onboarding"})]})]}),(0,n.jsx)(l.wJ,{className:"z-999",id:"sidebar_rail"}),(0,n.jsxs)(l.ZW,{className:"bg-sidebarbg pb-10",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.bb,{className:X("/settings"),onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/settings")})},id:"settings",children:[(0,n.jsx)(y.Z,{})," ",(0,h.Iu)("frontend.sidebar.settings")]}),(0,n.jsx)(l.w3,{children:(0,n.jsx)(l.LO,{children:(0,n.jsxs)(p.h_,{children:[(0,n.jsx)(p.$F,{className:"w-full",children:(0,n.jsxs)(l.bb,{className:"w-full flex justify-between hover:shadow-md transition-all",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:""==a?(0,n.jsx)("span",{children:(0,h.Iu)("frontend.sidebar.anonymous")}):(0,n.jsx)("span",{children:r})}),(0,n.jsx)(k.Z,{className:"w-4 h-4 justify-self-end"})]})}),(0,n.jsx)(p.AW,{side:"top",className:"bg-transparent backdrop-blur-lg backdrop-brightness-75 w-48",children:""==a?(0,n.jsxs)(p.Xi,{onMouseDown:()=>{(0,c.startTransition)(async()=>{u(),T.push("/login")})},children:[(0,n.jsx)(_.Z,{size:20})," ",(0,n.jsx)("span",{children:(0,h.Iu)("frontend.sidebar.sign_in")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.Xi,{children:[(0,n.jsx)(I.Z,{size:20})," ",(0,n.jsx)("span",{children:(0,h.Iu)("frontend.sidebar.account")})]}),(0,n.jsxs)(p.Xi,{onMouseDown:()=>{(0,z.wX)("global","token",""),(0,z.wX)("global","user_id",""),i(""),o(""),Z.Am.success((0,h.Iu)("frontend.sidebar.sign_out_successful"),{description:(0,h.Iu)("frontend.sidebar.sign_out_description")})},children:[(0,n.jsx)(S.Z,{})," ",(0,n.jsx)("span",{children:(0,h.Iu)("frontend.sidebar.sign_out")})]})]})})]})})})]}),(0,n.jsx)("div",{id:"ram_usage",className:"w-full h-10 -my-8 mt-0",children:(0,n.jsx)(D.Z,{url:"/stats",className:"w-full",container_classname:"overflow-y-hidden"})})]})]})}var M=s(866),P=s(81103);function L(){let[e,t]=(0,c.useState)({x:0,y:0}),[s,a]=(0,c.useState)({x:0,y:0}),[r,i]=(0,c.useState)(!1),[o,d]=(0,c.useState)(!1),[u,p]=(0,c.useState)(!1),[m,h]=(0,c.useState)(!1),[f,g]=(0,c.useState)(null),{open:b,isMobile:j,openMobile:v}=(0,l.Ap)(),w=j?!v:!b;(0,c.useEffect)(()=>{a({x:window.screenX,y:window.screenY})},[]);let N=e=>{e.clientY<=40?i(!0):i(!1)};(0,c.useEffect)(()=>(window.addEventListener("mousemove",N),()=>{window.removeEventListener("mousemove",N)}),[]),(0,c.useEffect)(()=>{let n=n=>{if(m){let r=s.x+(n.screenX-e.x),i=s.y+(n.screenY-e.y);a({x:r,y:i}),window.pywebview._bridge.call("pywebviewMoveWindow",[r,i],"move"),t({x:n.screenX,y:n.screenY})}},r=()=>{h(!1),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r)};return m&&(document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)),()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r)}},[m,s,e]);let y=e=>{e.target instanceof HTMLElement&&(e.preventDefault(),h(!0),t({x:e.screenX,y:e.screenY}))};return(0,c.useEffect)(()=>{(0,z.Or)("global","stay_on_top",!1).then(e=>{d(e)}),(0,z.Or)("global","transparency",!1).then(e=>{(0,x.ue)(e).then(()=>{p(e)})})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:g,className:"fixed top-0 left-[80px] right-0 h-[26px] z-30",style:{backgroundColor:"transparent"},onMouseMove:e=>{i(!0)},onMouseLeave:()=>{i(!1)},id:"slide_area"}),!w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"absolute h-4 w-[50px] rounded-bl-lg border-b border-l top-2 right-2 z-40 transition-all pointer-events-none bg-sidebar"}),(0,n.jsx)("div",{className:"absolute h-6 w-[59px] rounded-bl-lg top-0 right-0 z-30 bg-sidebar"})]}),(0,n.jsxs)("div",{className:w&&"flex gap-1 absolute h-6 w-[59px] border rounded-bl-lg top-0 right-0 items-center justify-center p-0 z-50 bg-sidebar transition-transform opacity-75 hover:opacity-100"||"flex gap-1 absolute h-6 w-[59px] rounded-bl-lg top-0 right-0 items-center justify-center p-0 z-50 bg-transparent transition-transform",onMouseDown:y,id:"window_controls",children:[w&&(0,n.jsx)("div",{className:"absolute right-0 top-0 h-6 flex items-center border pl-2.5 pr-12 transition-all bg-sidebar rounded-bl-lg z-[-10] duration-150 ".concat(r?"w-96 opacity-100":"w-0 opacity-0"),children:(0,n.jsx)("div",{className:"grow h-1 bg-repeat bg-center text-muted-foreground/30 font-geist-mono text-[12px] text-center",style:{backgroundImage:"radial-gradient(circle, currentColor 1px, transparent 1px)",backgroundSize:"10px 10px"},children:(0,n.jsx)("p",{className:"bg-sidebar w-16 justify-self-center -my-1.5 pointer-events-none text-xs",children:"move"})})}),(0,n.jsx)(P.pn,{children:(0,n.jsxs)(P.u,{delayDuration:250,children:[(0,n.jsx)(P.aJ,{onClick:e=>{let t=!o;d(t),(0,x.Xm)(t).then(()=>{Z.Am.success("".concat(t?"Window is now on top":"Window is no longer on top"))})},onContextMenu:e=>{e.preventDefault();let t=!u;p(t),(0,x.ue)(t).then(()=>{Z.Am.success("".concat(t?"Window is now transparent":"Window is no longer transparent"))})},children:(0,n.jsx)("div",{className:"w-[11px] h-[11px] bg-green-500 rounded-full flex items-center justify-center cursor-pointer"})}),(0,n.jsxs)(P._v,{className:"bg-sidebar border text-foreground font-geist",children:[(0,n.jsxs)("p",{className:"text-xs",children:[(0,n.jsx)("span",{className:"font-semibold text-muted-foreground",children:"LMB"})," Stay on top"]}),(0,n.jsxs)("p",{className:"text-xs",children:[(0,n.jsx)("span",{className:"font-semibold text-muted-foreground",children:"RMB"})," Transparency"]})]})]})}),(0,n.jsxs)(P.pn,{children:[(0,n.jsxs)(P.u,{delayDuration:250,children:[(0,n.jsx)(P.aJ,{onClick:()=>{(0,x.wx)()},children:(0,n.jsx)("div",{className:"w-[11px] h-[11px] bg-yellow-500 rounded-full flex items-center justify-center cursor-pointer"})}),(0,n.jsx)(P._v,{className:"bg-sidebar border text-white",children:(0,n.jsx)("p",{className:"text-xs",children:"Minimize"})})]}),(0,n.jsxs)(P.u,{delayDuration:250,children:[(0,n.jsx)(P.aJ,{onClick:()=>{(0,x.sm)()},children:(0,n.jsx)("div",{className:"w-[11px] h-[11px] bg-red-500 rounded-full flex items-center justify-center cursor-pointer"})}),(0,n.jsx)(P._v,{className:"bg-sidebar border text-white",children:(0,n.jsx)("p",{className:"text-xs",children:"Close"})})]})]})]}),!w&&(0,n.jsx)("div",{className:"absolute top-0 right-0 left-[80px] h-6 z-40",onMouseDown:y})]})}let X=e=>{let{...t}=e,{theme:s="system"}=(0,d.F)();return(0,n.jsx)(Z.x7,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};var R=s(60610),J=s(94508);function W(e){let{className:t,value:s,...a}=e;return(0,n.jsx)(R.fC,{"data-slot":"progress",className:(0,J.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...a,children:(0,n.jsx)(R.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})}var F=s(69711);function H(e){let{state:t,plugin_name:s,state_progress_percent:a}=e;return(0,n.jsxs)("div",{className:"h-min w-[354px] rounded-lg text-sm flex flex-col gap-2 font-semibold",children:[(0,n.jsxs)("div",{className:"flex justify-between text-start items-center",children:[(0,n.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:t}),(0,n.jsx)("p",{className:"text-muted-foreground p-0 text-xs pl-2",children:s})]}),(0,n.jsx)(W,{value:a,className:"pb-0"})]})}function V(e){let{state:t,plugin_name:s}=e;return(0,n.jsxs)("div",{className:"flex justify-between text-start items-center h-min font-semibold",children:[(0,n.jsxs)("div",{className:"flex text-left content-center items-center gap-2",children:[(0,n.jsx)(F.Z,{className:""}),(0,n.jsx)("p",{style:{whiteSpace:"pre-wrap"},className:"pl-1",children:t})]}),(0,n.jsx)("p",{className:"text-muted-foreground p-0 min-w-max text-xs pl-2",children:s})]})}function Y(){let{data:e,error:t}=(0,A.ZP)("states",()=>(0,x.Bx)()),[s,a]=(0,c.useState)([]),[r,i]=(0,c.useState)([]);return(0,c.useEffect)(()=>{let e=setInterval(()=>{(0,A.JG)("states")},1e3);return()=>clearInterval(e)},[]),t&&console.error(t),(0,c.useEffect)(()=>{if(e){let t=[];for(let o in e){let l=o,c=e[o].status,d=e[o].progress,u=0;if(u=d<=1?Math.floor(100*d):Math.floor(d),r.includes(l)&&-1!=d){let e=r.indexOf(l);t.push(e);let a=s[e];Z.Am.custom(e=>(0,n.jsx)(H,{state:c,plugin_name:l,state_progress_percent:u}),{duration:1/0,id:a})}else if(-1!=d)a([...s,Z.Am.custom(e=>(0,n.jsx)(H,{state:c,plugin_name:l,state_progress_percent:u}),{duration:1/0})]),i([...r,l]),t.push(r.length);else if(r.includes(l)&&""!=c){let e=r.indexOf(l);t.push(e);let a=s[e];Z.Am.custom(e=>(0,n.jsx)(V,{state:c,plugin_name:l}),{duration:1/0,id:a})}else""!=c&&(a([...s,Z.Am.custom(e=>(0,n.jsx)(V,{state:c,plugin_name:l}),{duration:1/0})]),i([...r,l]),t.push(r.length))}for(let e=0;e<s.length;e++)t.includes(e)||(Z.Am.dismiss(s[e]),s.splice(e,1),r.splice(e,1),Z.Am.success((0,h.Iu)("frontend.states.complete"),{duration:1e3}))}},[e]),null}var q=s(26110),B=s(6512),U=s(95186),$=s(56873),K=s(40875),G=s(30401);function Q(e){let{...t}=e;return(0,n.jsx)($.fC,{"data-slot":"select",...t})}function ee(e){let{...t}=e;return(0,n.jsx)($.B4,{"data-slot":"select-value",...t})}function et(e){let{className:t,size:s="default",children:a,...r}=e;return(0,n.jsxs)($.xz,{"data-slot":"select-trigger","data-size":s,className:(0,J.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[a,(0,n.jsx)($.JO,{asChild:!0,children:(0,n.jsx)(K.Z,{className:"size-4 opacity-50"})})]})}function es(e){let{className:t,children:s,position:a="popper",...r}=e;return(0,n.jsx)($.h_,{children:(0,n.jsxs)($.VY,{"data-slot":"select-content",className:(0,J.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[(0,n.jsx)(ea,{}),(0,n.jsx)($.l_,{className:(0,J.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,n.jsx)(er,{})]})})}function en(e){let{className:t,children:s,...a}=e;return(0,n.jsxs)($.ck,{"data-slot":"select-item",className:(0,J.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[(0,n.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)($.wU,{children:(0,n.jsx)(G.Z,{className:"size-4"})})}),(0,n.jsx)($.eT,{children:s})]})}function ea(e){let{className:t,...s}=e;return(0,n.jsx)($.u_,{"data-slot":"select-scroll-up-button",className:(0,J.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(k.Z,{className:"size-4"})})}function er(e){let{className:t,...s}=e;return(0,n.jsx)($.$G,{"data-slot":"select-scroll-down-button",className:(0,J.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(K.Z,{className:"size-4"})})}var ei=s(9987);let eo=(0,s(90535).j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function el(e){let{className:t,variant:s,size:a,...r}=e;return(0,n.jsx)(ei.f,{"data-slot":"toggle",className:(0,J.cn)(eo({variant:s,size:a,className:t})),...r})}var ec=s(50721);function ed(e){let{className:t,...s}=e;return(0,n.jsx)(ec.fC,{"data-slot":"switch",className:(0,J.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,n.jsx)(ec.bU,{"data-slot":"switch-thumb",className:(0,J.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var eu=s(85897),ep=s(32489),ex=s(12339),em=s(2296),eh=s(76857),ef=s(12658);function eg(e){let{onClose:t,open:s,json:a}=e,[r,i]=(0,c.useState)({});if(!a)return(0,n.jsx)("div",{});let o={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"},l={thin:"font-thin",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"},d=e=>(0,n.jsx)("p",{className:l[e.options.weight]+" "+o[e.options.size]+" "+e.classname,style:{whiteSpace:"pre-wrap"},children:(0,h.Iu)(e.text)}),u=e=>(0,n.jsx)("p",{className:l[e.options.weight]+" text-muted-foreground "+o[e.options.size]+" "+e.classname,style:{whiteSpace:"pre-wrap"},children:(0,h.Iu)(e.text)}),p=e=>(0,n.jsx)("p",{className:l[e.options.weight]+" "+o[e.options.size]+" "+e.classname,style:{whiteSpace:"pre-wrap"},children:(0,h.Iu)(e.text)}),x=e=>(0,n.jsx)("a",{href:e.url,className:l[e.options.weight]+" text-accent-foreground "+o[e.options.size]+" "+e.classname,style:{whiteSpace:"pre-wrap"},target:"_blank",children:(0,h.Iu)(e.text)}),m=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(B.Z,{})}),f=e=>e?(0,n.jsx)("div",{children:Array(e).fill(0).map((e,t)=>(0,n.jsx)("div",{className:"h-1"},t))}):(0,n.jsx)("div",{className:"h-4"}),g=e=>{let t=r[e.key]||e.options.default||"";if("string"==e.options.type)return(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,n.jsx)("h4",{children:(0,h.Iu)(e.name)}),(0,n.jsx)(U.I,{type:"text",placeholder:t,onChange:t=>{i(s=>({...s,[e.key]:t.target.value}))}}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]});if("number"==e.options.type){let t=e.options.default||0;return(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,n.jsx)("h4",{children:(0,h.Iu)(e.name)}),(0,n.jsx)(U.I,{type:"number",placeholder:t,className:"font-customMono",onChange:t=>{i(s=>({...s,[e.key]:t.target.value}))}}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]})}},b=e=>{let t=r[e.key]||e.options.default||0;return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("h4",{children:[(0,h.Iu)(e.name),"  â€”  ",t,e.options.suffix,t]}),(0,n.jsx)(eu.i,{min:e.options.min,max:e.options.max,defaultValue:[t],step:e.options.step,onValueChange:t=>{i(s=>({...s,[e.key]:t}))}}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]})},j=e=>{let t=r[e.key]||e.options.default||!1;return(0,n.jsxs)("div",{className:"flex justify-between p-0 items-center"+k(e.options.border),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1 pr-12",children:[(0,n.jsx)("h4",{className:"font-semibold",children:(0,h.Iu)(e.name)}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]}),(0,n.jsx)(ed,{checked:t,onCheckedChange:t=>{i(s=>({...s,[e.key]:t}))}})]})},v=e=>{let t=r[e.key]||e.options.default||"";return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("h4",{children:(0,h.Iu)(e.name)}),(0,n.jsxs)(Q,{defaultValue:t,onValueChange:t=>{i(s=>({...s,[e.key]:t}))},children:[(0,n.jsx)(et,{children:(0,n.jsx)(ee,{placeholder:t,children:t})}),(0,n.jsx)(es,{children:e.options.options.map(e=>(0,n.jsx)(en,{value:e,children:e},e))})]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]})},w=e=>{let t=r[e.key]||e.options.default||!1;return(0,n.jsxs)("div",{className:"flex gap-4 w-full items-center",children:[(0,n.jsx)(el,{pressed:t,onPressedChange:t=>{i(s=>({...s,[e.key]:t}))},className:"w-8 h-8 p-[7px] data-[state=on]:bg-background data-[state=on]:hover:bg-white/10 ",variant:"outline",children:t?(0,n.jsx)(G.Z,{}):(0,n.jsx)(ep.Z,{})}),e.options.separator&&(0,n.jsx)(B.Z,{orientation:"vertical"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:(0,h.Iu)(e.name)}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]})]})},N=e=>"submit"!=e.options.target?u((0,h.Iu)("frontend.dialog.not_supported","Button.target")):""!=e.title?(0,n.jsxs)("div",{className:"flex justify-between p-4 items-center"+k(e.options.border),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1 pr-12",children:[(0,n.jsx)("h4",{className:"font-semibold",children:(0,h.Iu)(e.title)}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]}),(0,n.jsx)(C.z,{variant:"outline",className:"min-w-32",onClick:()=>{t(r)},children:(0,h.Iu)(e.text)})]}):(0,n.jsx)(C.z,{variant:"outline",className:"",onClick:()=>{t(r)},children:(0,h.Iu)(e.text)}),y=e=>{let t=e.value,s=e.min,a=e.max;return(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,n.jsx)(W,{value:(t-s)/(a-s)*100}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.Iu)(e.description)})]})},k=e=>e?" p-4 border rounded-md":"p-4",_=e=>{Array.isArray(e)||(e=[e]);let t=[];for(let a of e){let e=Object.keys(a)[0],r=a[e];if("enabled_lock"==e&&t.push(u((0,h.Iu)("frontend.dialog.not_supported","EnabledLock"))),"title"==e&&t.push(d(r)),"description"==e&&t.push(u(r)),"label"==e&&t.push(p(r)),"link"==e&&t.push(x(r)),"markdown"==e){var s;t.push((s=r.text,(0,n.jsx)(em.U,{components:{code(e){let{node:t,inline:s,className:a,children:r,...i}=e,o=String(r).includes("\n"),l=/language-(\w+)/.exec(a||""),c=l?l[1]:"json";return o?(0,n.jsx)(eh.Z,{language:c,style:ef.Z,customStyle:{margin:"1rem 0",padding:"1rem",borderRadius:"0.5rem",fontSize:"0.75rem",fontFamily:"var(--font-geist-mono)"},children:String(r).replace(/\n$/,"")}):(0,n.jsx)("code",{className:"rounded-md bg-zinc-800 p-1 font-geist-mono text-xs",...i,children:r})},img(e){let{node:t,...s}=e;return(0,n.jsx)("img",{...s,className:"rounded-md"})}},className:s.classname,children:s})))}"separator"==e&&t.push(m()),"space"==e&&t.push(f(r.amount)),"group"==e&&("horizontal"==r.direction?t.push((0,n.jsx)("div",{className:"flex gap-4 w-full rounded-md"+k(r.border),children:_(r.components)})):t.push((0,n.jsx)("div",{className:"flex flex-col gap-4 w-full rounded-md"+k(r.border),children:_(r.components)}))),"form"==e&&t.push(_(r.components)),"tabview"==e&&t.push((0,n.jsxs)(ex.mQ,{className:"w-full",defaultValue:r.components[0].tab.name,children:[(0,n.jsx)(ex.dr,{className:"w-full bg-transparent border",children:r.components.map((e,t)=>(0,n.jsx)(ex.SP,{value:e.tab.name,children:(0,h.Iu)(e.tab.name)},t))}),r.components.map((e,t)=>(0,n.jsx)(ex.nU,{value:e.tab.name,className:"w-full rounded-md p-2 flex gap-6 flex-col",children:_(e)},t))]})),"tab"==e&&t.push(_(r.components)),"progress_bar"==e&&t.push(y(r)),"button"==e&&t.push(N(r)),"input"==e&&t.push(g(r)),"slider"==e&&t.push(b(r)),"switch"==e&&t.push(j(r)),"toggle"==e&&t.push(w(r)),"selector"==e&&t.push(v(r))}return t};return(0,n.jsxs)(q.Vq,{open:s,children:[(0,n.jsx)(q.hg,{className:"absolute",children:(0,n.jsx)("div",{})}),(0,n.jsx)(q.cZ,{className:"max-h-[80%] overflow-y-scroll overflow-x-hidden max-w-[550px]",children:(0,n.jsx)("div",{className:"flex flex-col gap-2 font-geist w-[calc(550px-88px)]",children:_(a)})})]})}function eb(){let[e,t]=(0,c.useState)({isOpen:!1,title:{__html:""},options:[],description:""}),[s,a]=(0,c.useState)({isOpen:!1,json:""}),[r,i]=(0,c.useState)(null),o=(0,c.useRef)(null),l=(0,c.useRef)(null),d=(0,E.useRouter)();(0,c.useEffect)(()=>{o.current=r},[r]);let u=(0,c.useCallback)(s=>{try{let n=s.data,r=JSON.parse(n);if("ask"in r){if(e.isOpen)return;t({isOpen:!0,title:{__html:"<div>".concat(r.ask.text,"</div>")},options:r.ask.options,description:r.ask.description})}else if("dialog"in r){a({isOpen:!0,json:r.dialog.json}),i(null);let e=setInterval(()=>{if(null!==o.current){var t;(null===(t=l.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&l.current.send(JSON.stringify(o.current)),i(null),clearInterval(e)}},200)}else if("navigate"in r){if(e.isOpen)return;let{url:s,reason:n,sender:a}=r.navigate;console.log("Navigation request from ".concat(a," to ").concat(s," with reason: ").concat(n||"No reason provided")),t({isOpen:!0,title:{__html:"<p>Navigation Request</p>"},options:["Allow","Deny"],description:"".concat(a," wants to navigate you to: ").concat(s).concat(n?'\n"'.concat(n,'"'):"")})}else if("type"in r&&"text"in r){let{type:e,text:t}=r;switch(e){case"error":Z.Am.error(t);break;case"success":Z.Am.success(t);break;case"info":Z.Am.info(t);break;case"warning":Z.Am.warning(t);break;default:(0,Z.Am)(t)}}}catch(e){console.error("Error handling WebSocket message:",e)}},[]);(0,c.useEffect)(()=>{if("localhost"!==x.ip){Z.Am.error("This device cannot connect to the websocket. You won't get notifications.");return}let e=new WebSocket("ws://".concat(x.ip,":37521"));return l.current=e,e.addEventListener("open",()=>{Z.Am.success((0,h.Iu)("frontend.immediate.connected"))}),e.addEventListener("message",u),e.addEventListener("close",()=>{Z.Am.error((0,h.Iu)("frontend.immediate.disconnected"))}),e.addEventListener("error",e=>{console.error("WebSocket error observed:",e)}),()=>{l.current&&l.current.readyState===WebSocket.OPEN&&l.current.close(),l.current=null}},[u]);let p=s=>{var n;if((null===(n=l.current)||void 0===n?void 0:n.readyState)===WebSocket.OPEN){if(e.title.__html.includes("Navigation Request")&&"Allow"===s){let t=e.description.match(/navigate you to: ([^\n"]+)/);t&&t[1]&&d.push("/page?url=".concat(t[1]))}else l.current.send(JSON.stringify({response:s}))}t(e=>({...e,isOpen:!1}))},m=(0,c.useCallback)(e=>{a(e=>({...e,isOpen:!1})),i(e)},[]);return(0,n.jsxs)("div",{className:"absolute gap-2 flex",children:[(0,n.jsx)(q.Vq,{open:e.isOpen,onOpenChange:e=>!e&&t(e=>({...e,isOpen:!1})),children:(0,n.jsxs)(q.cZ,{className:"bg-sidebarbg font-geist",children:[(0,n.jsx)(q.fK,{children:(0,n.jsx)(q.$N,{children:(0,n.jsx)("div",{dangerouslySetInnerHTML:e.title})})}),(0,n.jsx)(q.Be,{style:{whiteSpace:"pre-wrap"},children:e.description}),(0,n.jsx)("div",{className:"flex gap-2",children:e.options.map((e,t)=>(0,n.jsx)(C.z,{variant:"outline",onClick:()=>p(e),children:e},t))})]})}),(0,n.jsx)(eg,{open:s.isOpen,onClose:m,json:s.json})]})}var ej=s(43879),ev=s(33145),ew={src:"/_next/static/media/kofi.e7c69826.svg",height:194,width:241,blurWidth:0,blurHeight:0};function eN(e){let{closed_callback:t}=e,[s,a]=(0,c.useState)(!0);return(0,n.jsxs)(q.Vq,{open:s,onOpenChange:a,children:[(0,n.jsx)(q.hg,{}),(0,n.jsxs)(q.cZ,{className:"font-geist",children:[(0,n.jsx)(q.fK,{children:(0,n.jsx)(q.$N,{className:"text-lg!",children:(0,h.Iu)("frontend.disclaimer.title")})}),(0,n.jsx)("p",{className:"text-muted-foreground",children:(0,h.Iu)("frontend.disclaimer.description.line1")}),(0,n.jsx)("p",{className:"text-muted-foreground",children:(0,h.Iu)("frontend.disclaimer.description.line2")}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(C.z,{variant:"outline",onClick:()=>{open("https://ko-fi.com/Tumppi066","_blank")},className:"p-3 bg-kofi hover:bg-kofi-active! transition-all duration-300 group hover:pr-[20px] pr-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 pl-[3px] pointer-events-none",children:[(0,n.jsx)(ev.default,{src:ew,alt:"Ko-Fi",className:"w-6 h-6"}),(0,n.jsx)("span",{className:"max-w-0 opacity-0 group-hover:max-w-md group-hover:opacity-100 transition-all duration-300 whitespace-nowrap text-white",children:(0,h.Iu)("about.support_development")})]})}),(0,n.jsx)(C.z,{variant:"outline",className:"bg-input/20 max-w-full grow",onClick:()=>{a(!1),t()},children:(0,h.Iu)("frontend.disclaimer.ok")})]})]})]})}var ey=s(89318),ek=s(89504),e_=s(44363),eI=s(48614),eS=s(4008);function ez(e){let{children:t}=e,{data:s,isLoading:a}=(0,A.ZP)("language",x.CX,{refreshInterval:2e3}),[r,i]=(0,c.useState)(!0),[o,d]=(0,c.useState)(!1),[p,f]=(0,c.useState)(!1),[g,b]=(0,c.useState)(!0),[j,v]=(0,c.useState)(!1),w=(0,M.d)(),N=(0,E.useRouter)();(0,c.useEffect)(()=>{s&&((0,h.D0)(s),b(!0),(0,h.XJ)().then(()=>{b(!1)}))},[s]),(0,c.useEffect)(()=>{let e=localStorage.getItem("hasDoneOnboarding");console.log("Has done onboarding:",e),v("true"===e),"true"!=e&&(N.push("/onboarding"),console.log("Redirecting to onboarding page"))}),(0,c.useEffect)(()=>{(0,z.Or)("global","snow",!0).then(e=>{d(!0===e)}),(0,z.Or)("global","fireworks",!0).then(e=>{f(!0===e)})},[]),(0,c.useEffect)(()=>{(0,x.NY)().then(e=>{})});let y=new Date,k=y.getMonth(),_=y.getDate();return(0,c.useEffect)(()=>{(0,h.XJ)().then(()=>{b(!1)})},[]),(0,n.jsxs)("div",{className:"h-screen w-screen flex overflow-hidden",children:[(0,n.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-50",children:[(k>=10||0===k)&&o&&(0,n.jsx)(ek.Z,{snowflakeCount:50,speed:[-.5,.5],wind:[-.5,.5],radius:[0,.5]}),(0===k&&1===_||11===k&&31===_)&&p&&(0,n.jsx)(ej.j,{className:"w-full h-full",options:{rocketsPoint:{min:0,max:100},delay:{min:500,max:2e3}}})]}),(0,n.jsx)(ey.ZP,{}),(0,n.jsx)(u,{attribute:"class",defaultTheme:"system",enableSystem:!0,enableColorScheme:!0,disableTransitionOnChange:!0,children:(0,n.jsx)(eI.M,{mode:"wait",children:(g||a)&&(0,n.jsxs)(e_.E.div,{className:"absolute top-0 left-0 w-full h-full bg-sidebar flex items-center justify-center flex-col gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},children:[(0,n.jsx)(F.Z,{className:"opacity-50"}),(0,n.jsx)("p",{className:"font-geist text-muted-foreground",children:"Loading translations..."})]},"loading")||(0,n.jsx)(e_.E.div,{className:"w-full h-full flex flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},children:(0,n.jsxs)(eS.J,{children:[(0,n.jsx)(eN,{closed_callback:()=>{}}),(0,n.jsxs)(m.zq,{children:[(0,n.jsx)(X,{position:r?"bottom-center":"bottom-right",toastOptions:{unstyled:!0,classNames:{toast:"rounded-lg text-foreground shadow-lg w-[354px] border p-4 flex gap-2 items-center text-sm bg-background"}}}),(0,n.jsxs)(l.Hn,{open:r,onOpenChange:e=>{i(e)},children:[(0,n.jsx)(L,{}),(0,n.jsx)(Y,{}),(0,n.jsx)(eb,{}),(0,n.jsx)(T,{}),(0,n.jsxs)(l.kV,{className:"relative shadow-md! border transition-all duration-300 overflow-hidden ".concat(r?"max-h-[100vh]":"max-h-[97.6vh]"),children:[(0,n.jsx)(m.ko,{className:"absolute h-2 z-20 rounded-tl-lg shadow-lg shadow-sky-500/20 bg-sky-500 top-0 left-0"}),w&&(0,n.jsx)(l.vP,{className:"absolute top-2 left-2 z-50"}),t]})]})]})]})},"main")})})]})}var eE=s(48667);function eO(e){let{children:t}=e;return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsxs)("head",{children:[(0,n.jsx)("title",{children:"ETS2LA"}),(0,n.jsx)("meta",{name:"description",content:"ETS2LA Frontend Page"}),(0,n.jsx)("meta",{charSet:"UTF-8"}),(0,n.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("meta",{name:"theme-color",content:"#131316"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("body",{className:"".concat(r().variable," ").concat(o().variable," antialiased bg-sidebarbg overflow-hidden"),children:[(0,n.jsx)(eE.default,{src:"https://umami.ets2la.com/script.js","data-website-id":"ca602362-299b-4222-9ea5-bbd2610488b3",onError:()=>{}}),(0,n.jsx)(O.H,{children:(0,n.jsx)(ez,{children:t})})]})]})}},47960:function(){}},function(e){e.O(0,[776,279,363,569,310,945,861,438,83,284,890,872,971,117,744],function(){return e(e.s=86905)}),_N_E=e.O()}]);